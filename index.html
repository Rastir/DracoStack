<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Dracostack</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/img/Logo.png">
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body>
    <div class="container">

        <!-- HEADER -->
        <header class="header">
            <div class="header-left">
                <img src="/img/logo.png" alt="Empresa" class="logo">
                <div class="header-text">
                    <h1>An谩lisis de Churn</h1>
                    <h3>Predicci贸n Inteligente de Cancelamiento de Clientes</h3>
                </div>
            </div>
        </header>

        <!-- INTRO -->
        <section class="intro">
            <p>
                Esta plataforma permite analizar el riesgo de cancelaci贸n (churn) de clientes
                utilizando modelos de Machine Learning. A trav茅s de distintas vistas,
                puedes realizar predicciones individuales, consultar clientes existentes
                y explorar an谩lisis agregados para la toma de decisiones.
            </p>
        </section>

        <!-- TABS -->
        <div class="tabs">
            <button class="tab-btn active" onclick="cambiarTab(this, 'manual')">
                C谩lculo Manual
            </button>
            <button class="tab-btn" onclick="cambiarTab(this, 'busqueda')">
                B煤squeda
            </button>
            <button class="tab-btn" onclick="cambiarTab(this, 'stats')">
                An谩lisis Avanzado
            </button>
        </div>

        <!-- SECCIN MANUAL -->
        <section class="seccion" id="manual">
            <div class="card-layout">
                <div class="grid-manual">

                    <!-- FORMULARIO -->
                    <div class="card">
                        <div class="section-guide">
                            <h2>Predicci贸n Manual de Churn</h2>
                            <p>
                                Ingresa las caracter铆sticas de un cliente para estimar su probabilidad
                                de cancelaci贸n. Esta vista es ideal para an谩lisis individuales o simulaciones
                                de escenarios.
                            </p>
                        </div>
                        <h2> Datos del Cliente</h2>

                        <form id="churnForm">
                            <label for="age">Edad</label>
                            <input type="number" id="age" name="age" placeholder="Ej: 52" min="18" max="100" required>

                            <label for="gender">G茅nero</label>
                            <select id="gender" name="gender" required>
                                <option value="" disabled selected>Seleccionar...</option>
                                <option value="Male">Masculino</option>
                                <option value="Female">Femenino</option>
                            </select>

                            <label for="subscription_type">Tipo de Suscripci贸n</label>
                            <select id="subscription_type" name="subscription_type" required>
                                <option value="" disabled selected>Seleccionar...</option>
                                <option value="Basic">Basic</option>
                                <option value="Standard">Standard</option>
                                <option value="Premium">Premium</option>
                            </select>

                            <label for="watch_hours">Horas de Visualizaci贸n</label>
                            <input type="number" step="0.1" id="watch_hours" name="watch_hours" placeholder="Ej: 1.1"
                                min="0" required>

                            <label for="region">Regi贸n</label>
                            <select id="region" name="region" required>
                                <option value="" disabled selected>Seleccionar...</option>
                                <option value="Africa">frica</option>
                                <option value="Europe">Europa</option>
                                <option value="Asia">Asia</option>
                                <option value="Oceania">Ocean铆a</option>
                                <option value="South America">Sudam茅rica</option>
                                <option value="North America">Am茅rica del Norte</option>
                            </select>

                            <label for="number_of_profiles">N煤mero de perfiles</label>
                            <input type="number" id="number_of_profiles" name="number_of_profiles" placeholder="Ej: 3"
                                min="1" required>

                            <label for="payment_method">M茅todo de pago</label>
                            <select id="payment_method" name="payment_method" required>
                                <option value="" disabled selected>Seleccionar...</option>
                                <option value="debit card">Tarjeta de d茅bito</option>
                                <option value="paypal">PayPal</option>
                                <option value="crypto">Criptomonedas</option>
                                <option value="gift card">Tarjeta de regalo</option>
                                <option value="credit card">Tarjeta de cr茅dito</option>
                            </select>

                            <label for="device">Dispositivo</label>
                            <select id="device" name="device" required>
                                <option value="" disabled selected>Seleccionar...</option>
                                <option value="tablet">Tablet</option>
                                <option value="laptop">Laptop</option>
                                <option value="mobile">Celular</option>
                                <option value="tv">Televisi贸n</option>
                                <option value="desktop">Computador de escritorio</option>
                            </select>

                            <button type="submit">ANALIZAR CLIENTE</button>
                        </form>

                        <div id="resultado" class="resultado hidden"></div>
                    </div>

                    <!-- API PREVIEW -->
                    <div class="card">
                        <h2> Configuraci贸n de la API</h2>
                        <pre id="apiPreview" class="api-box">
POST /predict
Content-Type: application/json

{
  "age": 0,
  "gender": "",
  "subscription_type": "",
  "watch_hours": 0,
  "region": "",
  "number_of_profiles": 0,
  "payment_method": "",
  "device": ""
}
</pre>
                    </div>

                </div>
            </div>
        </section>

        <!-- SECCIN BSQUEDA -->
        <section class="seccion hidden" id="busqueda">
            <div class="card-layout">
                <div class="card search-container">
                    <h2> B煤squeda de Cliente</h2>

                    <p class="helper-text">
                        Consulta un cliente existente utilizando su identificador p煤blico (CUS-XXXX).
                        Esta opci贸n permite analizar clientes reales de la base de datos.
                    </p>

                    <label for="clientId">ID del Cliente</label>
                    <input type="text" id="clientId" placeholder="Ej: CUS-6BF81F27">

                    <button onclick="buscarCliente()">BUSCAR CLIENTE</button>

                    <div id="resultadoBusqueda" class="resultado hidden"></div>
                </div>
            </div>
        </section>

        <!-- SECCIN ESTADSTICAS -->
        <section class="seccion hidden" id="stats">
            <div class="card">
                <div class="stats-header">
                    <div class="stats-title">
                        <h2> An谩lisis Avanzado</h2>
                        <p class="helper-text">
                            Visualiza patrones globales de churn segmentados por g茅nero, tipo de suscripci贸n,
                            regi贸n y edad.
                            <br>Estas m茅tricas apoyan la toma de decisiones estrat茅gicas.</br>
                        </p>
                    </div>
                    <!-- Bot贸n exportar PDF en esquina superior derecha -->
                    <button id="exportPdfBtn" class="export-btn" onclick="exportChartsToPDF()">Exportar a PDF</button>
                </div>

                <div class="stats-grid">
                    <div class="chart-card">
                        <canvas id="chartRiesgo"></canvas>
                        <div class="chart-description">
                            <p>
                                Esta gr谩fica compara la proporci贸n de clientes que cancelan y no cancelan
                                seg煤n el g茅nero.
                            </p>
                            <p class="insight">
                                <strong>Insight:</strong> Los porcentajes de churn son homog茅neos entre hombres,
                                mujeres y otros, lo que sugiere que el g茅nero no es un factor determinante
                                en la cancelaci贸n.
                            </p>
                            <p class="implication">
                                <strong>Implicaci贸n:</strong> Esta variable aporta poco poder predictivo de forma
                                aislada y debe analizarse en conjunto con otros atributos.
                            </p>
                        </div>
                    </div>

                    <div class="chart-card">
                        <canvas id="chartSubscription"></canvas>
                        <div class="chart-description">
                            <p>
                                Comparaci贸n del churn entre planes b谩sicos, est谩ndar y premium.
                            </p>
                            <p class="insight">
                                <strong>Insight:</strong> La mayor concentraci贸n de cancelaciones se presenta en
                                las suscripciones b谩sicas.
                            </p>
                            <p class="implication">
                                <strong>Implicaci贸n:</strong> Los clientes con planes b谩sicos son un segmento clave
                                para estrategias de retenci贸n y mejora de valor percibido.
                            </p>
                        </div>
                    </div>

                    <div class="chart-card">
                        <canvas id="chartRegion"></canvas>
                        <div class="chart-description">
                            <p>
                                An谩lisis del comportamiento de cancelaci贸n seg煤n la ubicaci贸n geogr谩fica
                                de los clientes.
                            </p>
                            <p class="insight">
                                <strong>Insight:</strong> Europa presenta una mayor tendencia a la cancelaci贸n,
                                mientras que Norteam茅rica muestra un comportamiento m谩s equilibrado.
                            </p>
                            <p class="implication">
                                <strong>Implicaci贸n:</strong> La regi贸n puede reflejar diferencias de mercado,
                                competencia o expectativas del servicio, siendo relevante para decisiones
                                estrat茅gicas.
                            </p>
                        </div>
                    </div>

                    <div class="chart-card">
                        <canvas id="chartAge"></canvas>
                        <div class="chart-description">
                            <p>
                                Relaci贸n entre la edad del cliente y su probabilidad de cancelaci贸n.
                            </p>
                            <p class="insight">
                                <strong>Insight:</strong> Se observa menor churn en edades cercanas a 36 y 68 a帽os,
                                y una mayor tendencia a la cancelaci贸n entre los 47 y 54 a帽os.
                            </p>
                            <p class="implication">
                                <strong>Implicaci贸n:</strong> La edad presenta una relaci贸n no lineal con el churn,
                                aportando valor predictivo al modelo.
                            </p>
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- jsPDF UMD -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="/js/app.js"></script>

    <!-- FOOTER -->
    <footer class="footer">
        <p>
            Proyecto de An谩lisis de Churn 路 Machine Learning aplicado a Retenci贸n de Clientes
        </p>
        <p class="footer-small">
            Hackathon NoCountry & Alura LATAM 路 Modelo predictivo con enfoque en interpretabilidad y toma de decisiones
        </p>
    </footer>
    
</body>

</html>